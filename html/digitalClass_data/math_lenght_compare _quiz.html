<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>디딤돌</title>
    <!--Import-->
    <script type="text/javascript" src="../../js/jquery-3.6.0.js"></script>
    <script type='text/javascript' src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="../../js/common.js "></script>
    <script type="text/javascript" src="../../js/deigitalClass_game.js "></script>
    <!-- link -->
    <link rel="stylesheet" href="../../css/reset.css" />
    <link rel="stylesheet" href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
    <link rel="stylesheet" href="../../css/common.css" />
    <link rel="stylesheet" href="../../css/digitalClass_game.css" />
    <link rel="icon" href="../images/icon/favicon.ico">
</head>

<body>

    <div id="wrap">

        <div id="wrap_content" class="deigitalClass_game gradeOne lenght  quiz">
            <div class="wrap_inner">
                <div class="head">
                    <p>
                        <span>디지털 수학</span>&ensp;1학년 1학기 - 길이비교
                    </p>
                </div>
                <div class="explain_box">
                    <div class="comment">
                        <h3>길이 비교 - <span>Quiz!</span></h3>
                    </div>
                </div>
                <div class="game_wrap lenght">
                    <div class="question_comment">
                        <span class="kotra">아래 물건 중 가장 긴 것은 무엇일까요?</span>
                    </div>
                    <div class="game_place">
                        <div class="screen">
                            <!-- 정답 공개 클릭 시 가장 긴 img_box에 correct 클래스 추가 -->
                            <div class="swiper-slide canDrag">
                                <div class="img_box">
                                    <img src="../../img/digitalClass/racket_b.svg" alt="">
                                </div>
                            </div>
                            <div class="swiper-slide canDrag">
                                <div class="img_box">
                                    <img src="../../img/digitalClass/scissors_b.svg" alt="">
                                </div>
                            </div>
                            <div class="swiper-slide canDrag">
                                <div class="img_box">
                                    <img src="../../img/digitalClass/pencil_b.svg" alt="">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bottom_area">
                        <!-- 정답공개 클릭 시 다시 풀기 버튼 block 처리 -->
                        <button class="compare_btn basic_btn orange quiz">
                            정답 공개
                        </button>
                        <button class="reSolve_btn basic_btn orange">
                            다시 풀기
                        </button>
                        <button class="goback_btn basic_btn whiteOg" onclick="location.href='math_lenght_compare.html'">
                            처음으로 돌아가기
                        </button>
                    </div>
                    <!-- <div class="compare_btn"></div> -->
                </div>
            </div>
        </div>

        <script>
            // 길이 비교 스크립트
            let compareArray = [];
            const compareBtn = document.querySelector('.game_wrap.lenght .compare_btn');
            const reSolveBtn = document.querySelector('.reSolve_btn');
            compareBtn.addEventListener('click', () => {
                const box = document.querySelectorAll('.game_wrap.lenght .screen .swiper-slide');
                box.forEach((item, idx) => {
                    const imgObj = item.querySelectorAll('img');
                    for(let i = 0; i < imgObj.length; i++){
                        const elObj = {el: imgObj[i], width: imgObj[i].offsetWidth, id: idx }
                        compareArray.push(elObj);
                    };
                });

                compareArray.sort((a,b) => {
                    if(a.width > b.width) return 1;
                    if(a.width === b.width) return 0;
                    if(a.width < b.width) return -1;
                });

                console.log(compareArray[0], compareArray[compareArray.length - 1]);

                $('.game_wrap.lenght .screen .swiper-slide .delete_btn').css('display', 'none');
                compareArray[0].el.parentNode.parentNode.classList.add('short');
                compareArray[compareArray.length - 1].el.parentNode.parentNode.classList.add('long');
                compareArray[compareArray.length - 1].el.parentNode.classList.add('correct');

                if(compareBtn.classList.contains('quiz')){
                    compareBtn.style.display = "none";
                    reSolveBtn.style.display = "block";
                };
            });

            reSolveBtn.addEventListener('click', () => {
                const correctImg = document.querySelector('.img_box.correct');

                correctImg.classList.remove('correct');
                compareBtn.style.display = "block";
                reSolveBtn.style.display = "none";
            });
        </script>

    </div>
</body>

</html>